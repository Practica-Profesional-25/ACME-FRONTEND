{
  "app": {
    "name": "Adventure Works - Sistema de Ventas",
    "theme": {
      "style": "clean, modern",
      "palette": {
        "primary": "#f7941e",
        "secondary": "#7ac142",
        "accent": "#333333",
        "background": "#ffffff"
      }
    },
    "layout": {
      "header": {
        "fields": [
          { "label": "Cajero", "type": "text", "binding": "usuario.nombre" },
          { "label": "Sucursal", "type": "text", "binding": "sucursal.nombre" }
        ]
      },
      "sidebar": {
        "position": "left",
        "options": [
          { "label": "Ventas", "value": "ventas" },
          { "label": "Productos", "value": "productos" },
          { "label": "Clientes", "value": "clientes" },
          { "label": "Cerrar sesión", "value": "logout" }
        ],
        "restrictions": {
          "duringSaleProcess": {
            "disabledOptions": ["productos", "clientes", "logout"],
            "activeOption": "ventas"
          }
        }
      }
    },
    "flow": {
      "type": "wizard",
      "steps": [
        {
          "name": "Seleccion de Productos",
          "sections": [
            {
              "type": "search",
              "title": "Buscar bicicletas y complementos",
              "fields": [
                { "label": "Nombre", "type": "text" },
                { "label": "Identificador", "type": "text" },
                { "label": "Categoría (ej. Bicicletas, Cascos, Guantes, Accesorios)", "type": "select" },
                { "label": "Subcategoría", "type": "select" }
              ]
            },
            {
              "type": "table",
              "title": "Productos seleccionados",
              "columns": ["Identificador", "Nombre", "Cantidad", "Precio unitario", "Subtotal", "Impuesto", "Total"],
              "footer": ["Total de la venta"]
            }
          ],
          "validation": {
            "rules": ["Debe existir al menos un producto en la tabla antes de continuar"]
          }
        },
        {
          "name": "Seleccion de Cliente",
          "sections": [
            {
              "type": "search",
              "title": "Buscar cliente",
              "fields": [
                { "label": "Nombre", "type": "text" },
                { "label": "DUI", "type": "text" },
                { "label": "NIT", "type": "text" },
                { "label": "Correo electrónico", "type": "text" }
              ]
            },
            {
              "type": "form",
              "title": "Nuevo cliente - Factura",
              "fields": [
                { "label": "Nombre", "type": "text", "required": true },
                { "label": "Correo electrónico", "type": "email", "required": true }
              ]
            },
            {
              "type": "form",
              "title": "Nuevo cliente - Crédito Fiscal",
              "fields": [
                { "label": "Nombre", "type": "text", "required": true },
                { "label": "Registro Fiscal", "type": "text", "required": true },
                { "label": "NIT", "type": "text", "required": true },
                { "label": "Giro / Actividad Económica", "type": "select", "required": true },
                { "label": "Teléfono", "type": "text", "required": true },
                { "label": "Departamento", "type": "select", "required": true },
                { "label": "Municipio", "type": "select", "required": true },
                { "label": "Distrito", "type": "select", "required": true },
                { "label": "Dirección", "type": "textarea", "required": true }
              ]
            },
            {
              "type": "option",
              "title": "Cliente por defecto",
              "options": [{ "label": "Consumidor final", "value": "default" }]
            }
          ],
          "validation": {
            "rules": ["Debe seleccionarse un cliente existente o crearse uno nuevo para continuar"]
          }
        },
        {
          "name": "Resumen de Compra",
          "sections": [
            {
              "type": "table",
              "title": "Detalle de productos",
              "columns": ["Identificador", "Nombre", "Cantidad", "Precio unitario", "Impuesto", "Subtotal"]
            },
            {
              "type": "summary",
              "title": "Cliente y documento tributario",
              "fields": [{ "label": "Cliente seleccionado" }, { "label": "Tipo de documento tributario" }]
            },
            {
              "type": "payment",
              "title": "Método de pago",
              "options": [
                {
                  "label": "Efectivo",
                  "fields": [
                    { "label": "Monto entregado", "type": "number", "required": true },
                    { "label": "Vuelto", "type": "calculated" }
                  ]
                },
                {
                  "label": "Tarjeta",
                  "fields": [
                    { "label": "Estado de POS", "type": "status", "values": ["Listo para procesar", "Venta procesada"] }
                  ]
                }
              ]
            }
          ],
          "validation": {
            "rules": ["Debe seleccionarse un método de pago antes de continuar"]
          }
        },
        {
          "name": "Estado de la Venta",
          "sections": [
            {
              "type": "status",
              "title": "Resultado de la venta",
              "fields": [
                { "label": "Estado", "values": ["Efectuada", "Rechazada"] },
                { "label": "Razón del rechazo", "type": "text" }
              ]
            },
            {
              "type": "qr",
              "title": "DTE emitido",
              "description": "Escanea el QR para acceder al documento en el Ministerio de Hacienda"
            },
            {
              "type": "action",
              "title": "Opciones",
              "buttons": [{ "label": "Imprimir comprobante", "action": "print" }]
            }
          ],
          "onComplete": {
            "redirect": "ventasPrincipal"
          }
        }
      ]
    },
    "screens": [
      {
        "name": "ventasPrincipal",
        "title": "Ventas",
        "sections": [
          {
            "type": "table",
            "title": "Ventas realizadas",
            "columns": ["Número de venta", "Cliente", "Total", "Fecha", "Estado"],
            "pagination": true,
            "dataBinding": "ventasPorCajero"
          },
          {
            "type": "action",
            "buttons": [{ "label": "Nueva venta", "action": "startSaleProcess" }]
          }
        ]
      },
      {
        "name": "productos",
        "title": "Mantenimiento de productos",
        "sections": [
          {
            "type": "crud",
            "entity": "Producto",
            "fields": ["Identificador", "Nombre", "Categoría", "Subcategoría", "Precio", "Stock"]
          }
        ]
      },
      {
        "name": "clientes",
        "title": "Mantenimiento de clientes",
        "sections": [
          {
            "type": "crud",
            "entity": "Cliente",
            "fields": ["Nombre", "DUI", "NIT", "Correo", "Teléfono", "Dirección"]
          }
        ]
      }
    ]
  }
}
